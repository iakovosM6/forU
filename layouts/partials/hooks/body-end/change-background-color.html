<script>
  function updateTheme() {
    let isDark = document.documentElement.classList.contains('dark'); // Check if dark mode is active
    let bg = document.getElementById('page-bg') || document.body; // Fallback to body if page-bg is missing

    if (isDark) {
      bg.style.backgroundColor = '#000000'; // Midnight Black
      bg.style.color = '#ffffff'; // White text for contrast
    } else {
      bg.style.backgroundColor = '#ffffff'; // Neutral White
      bg.style.color = '#000000'; // Black text for contrast
    }
  }

  // Run on page load
  updateTheme();

  // Listen for theme changes dynamically
  document.addEventListener('hbThemeChange', (e) => {
    console.debug('Theme changed - isDarkTheme? ' + e.detail.isDarkTheme());
    updateTheme();
  });

  // Also update when user manually toggles the theme (optional)
  setInterval(updateTheme, 1000); // Check theme every second
</script>
